{% extends "./layout.peb" %}
    {% block "post" %}
        {% if model.invitations.size() != 0%}
        {% if model.pageable.filter == "all" %}
         <title>üòç –í—Å–µ –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</title>
        {% endif %}
        {% if model.pageable.filter == "open" %}
        <title>üòç –û—Ç–∫—Ä—ã—Ç—ã–µ –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</title>
        {% endif %}
        {% if model.pageable.filter == "cancel" %}
        <title>üò± –û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</title>
        {% endif %}
            {% if model.pageable.filter == "crew" %}
            <title>üòç –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è —Å–æ–±–∏—Ä–∞—é—Ç –∫–æ–º–∞–Ω–¥—É</title>
            {% endif %}
            {% if model.pageable.filter == "close" %}
        <title>üòç –£ –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –º–µ—Å—Ç –Ω–µ—Ç</title>
        {% endif %}
            {% if model.pageable.filter == "start" %}
            <title>üòç –ù–∞—á–∞—Ç—ã–µ –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</title>
            {% endif %}
            {% if model.pageable.filter == "end" %}
            <title>üòç –ó–∞–∫–æ–Ω—á–µ–Ω–Ω—ã–µ –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</title>
            {% endif %}

        {% else %}
        <title>üò± –ù–µ—Ç –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π</title>
        {% endif %}
    {% endblock %}

    {% macro myselect( name,enums,dict,filter )%}
            <select name="{{ name }}" class="columns">
                <option value="{{filter}}">{{ dict[filter] }}</option>
                {%for enum in enums %}
                {% if enum != filter  %}
                    <option value="{{enum}}">{{  dict[enum]}}</option>
                {% endif %}
                {% endfor %}
            </select>

    {% endmacro %}
{% block content %}
<div class="grid-x grid-padding-x">
    <div class="medium-3 cell">
        <form method="get">
            <label class="columns">–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è</label>
            {{ myselect("filter",["all","open","crew","close","start","end","cancel"],
            {"all":"–í—Å–µ",
            "open": "–û—Ç–∫—Ä—ã—Ç–æ –¥–ª—è –Ω–∞–±–æ—Ä–∞ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π",
            "crew": "–ù–∞–±–∏—Ä–∞—é—Ç –∫–æ–º–∞–Ω–¥—É",
            "close":"–ó–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ",
            "start":"–ù–∞—á–∞—Ç—ã–µ",
            "end":"–ó–∞–∫–æ–Ω—á–µ–Ω–Ω—ã–µ",
            "cancel": "–û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ"},
            model.pageable.filter )}}
            <label class="columns">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</label>

            {{ myselect("sort",["no","name","status","start","end"],
            {"no":"–ë–µ–∑ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏",
            "name": "–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é",
            "status": "–ü–æ —Å—Ç–∞—Ç—É—Å—É",
            "start":"–ü–æ –¥–∞—Ç–µ –Ω–∞—á–∞–ª–∞",
            "end":"–ü–æ –¥–∞—Ç–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è"},
            model.pageable.sort )}}

            <div class="medium-6 cell">
                <input type="submit" value="–ü—Ä–∏–º–µ–Ω–∏—Ç—å" class="button">
            </div>
        </form>
    </div>
</div>
    {% for travel in model.travels %}
    <div class="grid-x grid-padding-x">
    <div class="medium-12 cell">

        <div class="callout">
            <div class="grid-x grid-padding-x">
                <div class="medium-5 cell">
                    <h4> {{  travel.first.name }} </h4>
                    <img width="200px" height="500px" src="/photo/{{travel.first.ship_id.url}}"></img>
                    <p>–û–ø–∏—Å–∞–Ω–∏–µ: {{travel.first.ship_id.description}}</p>
                    <p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç: {{ travel.first.ship_id.countPlace }}
                    <p>–°—Ç–∞—É—Ç—Å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è: {{travel.first.status}}</p>
                    <p>–ù–∞—á–∞–ª–æ  {{ travel.first.date_start }}  –û–∫–æ–Ω—á–∞–Ω–∏–µ  {{ travel.first.date_end }}  </p>
                    <p><a href="/travel/{{ travel.first.id }}"> –ü–æ–¥—Ä–æ–±–Ω–µ–µ</a></p>
                </div>
                <div class="medium-7 cell">
                    <div class="grid-container">
                        <p>–≠–∫–∏–ø–∞–∂:</p>
                        <div class="grid-x grid-padding-x">
                    {% for user in travel.second %}
                        <div class="medium-3 cell">
                                {% if user.role == "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä" %}
                                <p> –ö–∞–ø–∏—Ç–∞–Ω: {{user.name}} </p>
                                {%else%}
                                <p>{{user.role}}: {{user.name}} {{user.surname}} {{user.middle_name}}</p>
                                {% endif %}
                        </div>
                    <div class="medium-3 cell">
                    </div>
                    {% endfor %}
                </div>
            </div>{% if currentUser is not null and travel.first.status == "–û—Ç–∫—Ä—ã—Ç–æ –¥–ª—è –Ω–∞–±–æ—Ä–∞ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π" and Permission.visit %}
                    <form method="post" action="/visit/create/{{ travel.first.id }}">
                        <input type="submit" value="–ó–∞–ø–∏—Å–∞—Ç—å—Å—è" class="button">
                    </form>
                    {% endif %}
            {% if currentUser is not null and Permission.travelCrew %}
                <div class="grid-x grid-padding-x">
                    <div class="medium-2 cell">
                        <a class="button" href="/invitation/{{ travel.first.id }}/create">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å</a>
                    </div>
                </div>
                {% endif %}

        </div>
            </div>
        </div>
    </div>
    </div>
        {% endfor %}
{% if  model.travels.size() == 0 %}
<div class="grid-container">
    <div class="medium-12 cell">

        <h4>–ù–µ—Ç —Ç–∞–∫–∏—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π</h4>
    </div>
</div>
{% endif %}
{% if  model.travels.size() != 0 %}
<nav aria-label="Pagination">
    <ul class="pagination text-center">
        {% if model.pageable.page == 1 %}
            <li class="pagination-previous disabled">Previous</li>
            {% else %}
            <li class="pagination-previous active"><a href="?filter={{ model.pageable.filter }}&&page={{ model.pageable.page - 1}}">Previous</a></li>
        {% endif %}
        {% if model.pageable.maxpage <=10%}
            {% for page in range(1,model.pageable.maxpage)%}
                {% if model.pageable.page == page%}
                    <li class="current"><span class="show-for-sr">You're on page</span> {{ page }}</li>
                    {%else%}
                    <li><a href="?filter={{ model.pageable.filter }}&&page={{ page }}" aria-label="Page {{ page }}">{{ page }}</a></li>
                {% endif %}
            {%endfor %}
        {% endif %}
        {% if model.pageable.page == model.pageable.maxpage %}
            <li class="pagination-next disabled">Next</li>
            {% else %}
            <li class="pagination-next"><a href="?filter={{ model.pageable.filter }}&&page={{ model.pageable.page + 1 }}" aria-label="Next page">Next</a></li>
        {% endif%}
    </ul>
</nav>
{% endif %}

{% endblock %}