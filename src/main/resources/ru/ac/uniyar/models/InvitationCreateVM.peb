{% extends "./layout.peb" %}

    {% macro tabspanel(id, users, role, travel_id) %}
        <div class="tabs-panel" id="{{ id }}">
        {% for user in users %}

            {% if user.role ==  role  %}
                <div class="grid-container">
                    <div class="cell medium-4">
                        <div class="grid-x grid-padding-x">
                            <div class="cell medium-2">
                                <p>{{ user.name }} {{ user.surname }} {{ user.middle_name }} </p>
                            </div>
                            <div class="cell medium-2">
                                <form method="post" action="/invitation/{{ travel_id }}/create/{{ user.id }}" >
                                    <button class="button tiny" type="submit">
                                        <!-- Screen readers will see "close" -->
                                        <span class="show-for-sr">Close</span>
                                        <!-- Visual users will see the X, but not the "Close" text -->
                                        <span aria-hidden="true"><i class="fi-x">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å</i></span>
                                    </button>
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}

        {% endfor %}
        </div>
    {% endmacro %}

    {% macro tabspanelinvite(id, invites, travel_id) %}
    <div class="tabs-panel" id="{{ id }}">
            {% for invite in invites %}
                <div class="grid-container">
                    <div class="cell medium-8">
                        <div class="grid-x grid-padding-x">
                            <div class="cell medium-6">
                                <p>{{ invite.user_id.name }} {{ invite.user_id.surname }} {{ invite.user_id.middle_name }} {{ invite.status }}</p>
                            </div>
                            <div class="cell medium-2">

                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
    </div>
    {% endmacro %}
    {% block "post" %}
    <title>üéè –°–æ–±–∏—Ä–∞–µ–º –∫–æ–º–∞–Ω–¥—É!</title>
    {% endblock %}
{% block content %}
<div class="grid-x grid-padding-x">
    <div class="medium-12 cell">
        <div class="callout">
            <div class="grid-x grid-padding-x">
                <div class="medium-5 cell">
                    <h4> {{  model.crews[0].travel_id.name }} </h4>
                    <img width="200px" height="500px" src="/photo/{{model.crews[0].travel_id.ship_id.url}}"></img>
                    <p>–û–ø–∏—Å–∞–Ω–∏–µ: {{model.crews[0].travel_id.ship_id.description}}</p>
                    <p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç: {{ model.crews[0].travel_id.ship_id.countPlace }}
                    <p>–°—Ç–∞—É—Ç—Å –ø—É—Ç—à–µ—Å—Ç–≤–∏—è : {{model.crews[0].travel_id.status}}</p>

                </div>
                <div class="medium-7 cell">
                <div class="grid-container">
                        <p> –≠–∫–∏–ø–∞–∂:</p>
                    <div class="grid-x grid-padding-x">
                    {% for crew in model.crews %}
                            <div class="medium-3 cell">
                                {% if crew.user_id.role == "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä" %}
                                         <p> –ö–∞–ø–∏—Ç–∞–Ω: {{crew.user_id.name}} </p>
                                {%else%}
                                    <p>{{crew.user_id.role}}: {{crew.user_id.name}}</p>
                                {% endif %}
                            </div>
                            <div class="medium-3 cell">
                                {% if crew.user_id.role != "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä" and crew.user_id.role != "–ö–∞–ø–∏—Ç–∞–Ω" %}
                                <form method="post" action="/crew/delete/{{ crew.id }}">
                                    <button class="button tiny" type="submit">
                                        <!-- Screen readers will see "close" -->
                                        <span class="show-for-sr">Close</span>
                                        <!-- Visual users will see the X, but not the "Close" text -->
                                        <span aria-hidden="true"><i class="fi-x">X</i></span>
                                    </button>
                                    </form>
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                        </div>

                </div>
            </div>
        </div>
    </div>
    <div class="cell">

            <ul class="tabs" data-active-collapse="true" data-tabs id="collapsing-tabs" print-hrefs="true">
                <li class="tabs-title"><a href="#panel1c" print-hrefs="true">–ö–∞–ø–∏—Ç–∞–Ω—ã</a></li>
                <li class="tabs-title is-active"><a href="#panel2c" print-hrefs="true">–ë–æ—Ü–º–∞–Ω—ã</a></li>
                <li class="tabs-title"><a href="#panel3c" print-hrefs="true">–ü–æ–≤–∞—Ä–∞</a></li>
                <li class="tabs-title"><a href="#panel4c" print-hrefs="true">–ú–∞—Ç—Ä–æ—Å—ã</a></li>
                <li class="tabs-title"><a href="#panel5c" print-hrefs="true">–ü—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã–µ</a></li>
            </ul>

            <div class="tabs-content" data-tabs-content="collapsing-tabs">
                {{  tabspanel("panel1c",model.users,"–ö–∞–ø–∏—Ç–∞–Ω", model.crews[0].travel_id.id)}}
                {{  tabspanel("panel2c",model.users,"–ë–æ—Ü–º–∞–Ω", model.crews[0].travel_id.id)}}
                {{  tabspanel("panel3c",model.users,"–ü–æ–≤–∞—Ä",model.crews[0].travel_id.id)}}
                {{  tabspanel("panel4c",model.users,"–ú–∞—Ç—Ä–æ—Å", model.crews[0].travel_id.id)}}
                {{  tabspanelinvite("panel5c", model.invitations, model.crews[0].travel_id.id)}}
            </div>

    </div>
</div>
{% endblock %}